el("form#form_setup")&&(""==_('textarea[name^="field_values"]').val()&&"select"!=_('select[name^="field_type"]').val()&&"multiselect"!=_('select[name^="field_type"]').val()&&_('textarea[name^="field_values"]').disable(),_('select[name^="field_type"]').on("change",(function(){"select"==_(this).val()||"multiselect"==_(this).val()?_('textarea[name^="field_values"]').enable():_('textarea[name^="field_values"]').val("").disable()})),_('textarea[name^="field_values"]').on("focus",(function(){""!=_(this).val()||"select"!=_('select[name^="field_type"]').val()&&"multiselect"!=_('select[name^="field_type"]').val()||_(this).val("[1][]\r\n[2][]\r\n[3][]")})),_('textarea[name^="field_default"]').on("focus",(function(){const self=_(this);""==self.val()&&("checkbox"==_('select[name^="field_type"]').val()||"select"==_('select[name^="field_type"]').val()?self.val("1"):"multiselect"==_('select[name^="field_type"]').val()&&self.val("-1-"))}))),el("table.setup")&&fraymDragDropApply("table.setup tbody tr",{sortable:!0,dragEnd:function(){const self=_(this),link=self.find("td").first().html(),values=/\/(\d+)\/act=edit/g.exec(link),code=self.index()+1;let trClassNumber=1;_("table.setup tbody tr").each((function(){_(this).removeClass("string1").removeClass("string2").addClass(`string${trClassNumber}`),trClassNumber=3-trClassNumber})),actionRequest({action:"setup/change_project_field_code",obj_id:values[1],code:code})}}),withDocumentEvents&&(_(document).on("keydown",'textarea[name^="field_values"]',(function(e){if(13==e.keyCode&&("select"==_('select[name^="field_type"]').val()||"multiselect"==_('select[name^="field_type"]').val())){const self=_(this),val=self.val();if(val.length==self.prop("selectionStart")){e.preventDefault();const values=val.match(/\[\d+]/g),lastone=0;values&&_each(values,(function(value){const curval=parseInt(value.replace("[","").replace("]",""));curval>lastone&&(lastone=curval)})),lastone++,self.val(`${self.val()}${values?"\r\n":""}[${lastone}][]`),self.scrollTop(self[0].scrollHeight-self.height())}}})),_arSuccess("change_project_field_code",(function(){})));