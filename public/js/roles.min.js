const allrpgRolesList=(command,projectId,objType,objId,allrpgRolesListDiv)=>new Promise(((resolve,reject)=>{if(allrpgRolesListDiv=void 0===allrpgRolesListDiv?document.getElementById("allrpgRolesListDiv"):document.getElementById(allrpgRolesListDiv)){allrpgRolesListDiv.className+=(allrpgRolesListDiv.className?" ":"")+"allrpgRolesListLoading",void 0===projectId&&(allrpgRolesListDiv.getAttribute("project_id")?projectId=allrpgRolesListDiv.getAttribute("project_id"):(allrpgRolesListDiv.innerHTML="Error: project id not set.",reject())),void 0===objType&&(objType="group",allrpgRolesListDiv.getAttribute("data-obj-type")&&(objType=allrpgRolesListDiv.getAttribute("data-obj-type"))),void 0===objId&&(objId=["all"],allrpgRolesListDiv.getAttribute("data-obj-id")&&(objId=allrpgRolesListDiv.getAttribute("data-obj-id")));const formData=new FormData;formData.append("action","get_roles_list"),formData.append("command",command),formData.append("project_id",projectId),formData.append("obj_type",objType),formData.append("obj_id",objId),void 0===window.dynrequestPath&&(window.dynrequestPath="https://www.allrpg.info/roles/");const xhr=new XMLHttpRequest;xhr.open("POST",window.dynrequestPath),xhr.send(formData),xhr.onreadystatechange=function(){if(4==xhr.readyState&&200==xhr.status){const data=JSON.parse(xhr.responseText);if("success"===data.response)if(data.response_data){allrpgRolesListDiv.innerHTML=data.response_data;const e=document.getElementById(window.location.hash.substr(1));e&&e.scrollIntoView&&e.scrollIntoView()}else allrpgRolesListDiv.innerHTML="Error: no data found.",reject();else"error"==data.response&&(allrpgRolesListDiv.innerHTML="Error: "+data.response_text,reject());allrpgRolesListDiv.className=allrpgRolesListDiv.className.replace(/(?:^|\s)allrpgRolesListLoading(?!\S)/g,""),resolve()}}}}));